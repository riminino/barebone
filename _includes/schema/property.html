{%- assign attributes = include.property[1] -%}
{%- assign id = parent | push: include.property[0] | join: "." -%}
{%- assign label = id | split: '.' | last | default: id -%}
{%- assign type = attributes.type | default: "text" -%}
{% comment %} -------------------- Hidden -------------------- {% endcomment %}
{%- if type == "hidden" -%}
<input type="{{ type }}" id="{{ id }}" aria-label="{{ label }}" value="{{ attributes.value }}">
{% comment %} -------------------- Schema -------------------- {% endcomment %}
{%- elsif type == "schema" and attributes.properties.size > 0 -%}
  {%- assign parent = parent | push: label -%}
  {% for p in attributes.properties %}
    {% include schema/property.html property=p %}
  {% endfor %}
  {%- assign parent = parent | pop -%}
{%- else -%}
{% comment %} -------------------- Types -------------------- {% endcomment %}
<div {% if attributes.subordinate %} data-subordinate="{{ attributes.subordinate }}"{% endif %}>
{% comment %} -------------------- Label -------------------- {% endcomment %}
  <label for="{{ id }}"{% if attributes.tooltip %} title="{{ attributes.tooltip }}"{% endif %}>{% if type == "array" %}{{ attributes.title | default: label }}{% else %}{{ attributes.title | default: id }}{% endif %}{% if attributes.required %}<sup>*</sup>{% endif %}</label>
{% comment %} -------------------- List -------------------- {% endcomment %}
  {% if attributes.list %}
    <select
      id="{{ id }}"
      aria-label="{{ label }}"
      {% if attributes.required %} required{% endif %}
      type="{{ type }}">
      {% for item in attributes.list %}{% if item.first %}<option value="{{ item.value }}"{% if item.value == attributes.value %} selected{% endif %}>{{ item.value }}</option>{% else %}<option value="{{ item }}"{% if item == attributes.value %} selected{% endif %}>{{ item }}</option>{% endif %}
      {% endfor %}
    </select>
  {% else %}
{% comment %} -------------------- Classic type -------------------- {% endcomment %}
    {%- if "text,number,date,time" contains type -%}
      <input
        type="{{ type }}"
        id="{{ id }}"
        aria-label="{{ label }}"
        {% if attributes.value %} value="{{ attributes.value }}"{% endif %}
        {% if attributes.min %} min="{{ attributes.min }}"{% endif %}
        {% if attributes.max %} max="{{ attributes.max }}"{% endif %}
        {% if attributes.maxlength %} maxlength="{{ attributes.maxlength }}"{% endif %}
        {% if attributes.minlength %} minlength="{{ attributes.minlength }}"{% endif %}
        {% if attributes.default %} data-default="{{ attributes.default }}"{% endif %}
        {% if attributes.required %} required{% endif %}
        {% if attributes.placeholder %} placeholder="{{ attributes.placeholder }}"{% endif %}
        {% if attributes.step %} step="{{ attributes.step }}"{% endif %}>
{% comment %} -------------------- Boolean -------------------- {% endcomment %}
    {%- elsif "checkbox,radio" contains type -%}
      <input
        type="{{ type }}"
        id="{{ id }}"
        aria-label="{{ label }}"
        {% if attributes.required %} required{% endif %}
        {% if attributes.value %} checked{% endif %}>
        <input data-exclude="true" style="visibility:hidden;" size="1">
{% comment %} -------------------- Color -------------------- {% endcomment %}
    {%- elsif type == "color" -%}
      <input
        type="{{ type }}"
        id="{{ id }}"
        aria-label="{{ label }}"
        {% if attributes.value %} value="{{ attributes.value }}"{% endif %}
        {% if attributes.required %} required{% endif %}>
        <input data-exclude="true" style="visibility:hidden;" size="1">
{% comment %} -------------------- Add property -------------------- {% endcomment %}
    {%- elsif type == "property" -%}
      <a href="#{{ label }}" class="add-property" data-prevent="true">Add</a>
      <input data-exclude="true" style="visibility:hidden;" size="1">
      {% if attributes.properties.size > 0 %}
      <template id="template-{{ label }}">
        <div>
          <label></label>
          <a href="#" class="remove-property" data-prevent="true">Remove</a>
          <input data-exclude="true" style="visibility:hidden;" size="1">
        </div>
        {%- assign parent = parent | push: id -%}
        {% for p in attributes.properties %}
        {% include schema/property.html property=p %}
        {% endfor %}
        <hr>
        {%- assign parent = parent | pop -%}
      </template>
      {%- assign hr = 1 -%}
      {%- assign hr_subordinate = attributes.subordinate -%}
      {% endif %}
{% comment %} -------------------- Add list element ------------------ {% endcomment %}
    {%- elsif type == "array" -%}
      <a href="#{{ label }}" class="add-element" data-index="0" data-add="{{ label }}">Add</a>
      <input data-exclude="true" style="visibility:hidden;" size="1">
      <template id="template-{{ label }}">
        <div>
          <label for="{{ id }}"><small class="index"></small> <a href="#{{ label }}" class="remove-element" data-prevent="true">Remove</a></label>
          <input type="text" id="{{ id }}" aria-label="{{ label }}">
        </div>
      </template>
{% comment %} -------------------- End types -------------------- {% endcomment %}
    {%- else -%}unknow type
    {%- endif -%}
  {% endif %}
{% comment %} ----------------- Description / units -------------------- {% endcomment %}
  {% if attributes.description or attributes.unit %}<span>{{ "" | split: "" | push: attributes.description | push: attributes.unit | join: " " | strip | markdownify | remove: "<p>" | remove: "</p>" }}</span>{% endif %}
</div>
{%- endif -%}
{% comment %} -------------- Horizontal bar for property -------------- {% endcomment %}
{% if hr == 1 %}<hr hr="1" {% if hr_subordinate %} data-subordinate="{{ hr_subordinate }}"{%- assign hr_subordinate = "" -%}{% endif %}>{%- assign hr = 0 -%}{% endif %}